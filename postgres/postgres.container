[Unit]
Description=PostgreSQL quadlet

[Container]
Image=docker.io/pgvector/pgvector:pg17-trixie
AutoUpdate=registry

Secret=POSTGRES_PASSWORD,type=env,target=POSTGRES_PASSWORD
Secret=N8N_POSTGRESQL__PASSWORD,type=env,target=N8N_POSTGRESQL__PASSWORD
Secret=AUTHENTIK_POSTGRESQL__PASSWORD,type=env,target=AUTHENTIK_POSTGRESQL__PASSWORD
Secret=LINKWARDEN_POSTGRESQL__PASSWORD,type=env,target=LINKWARDEN_POSTGRESQL__PASSWORD

Network=db.network
NetworkAlias=postgres

Volume=./init:/docker-entrypoint-initdb.d:Z
Volume=postgres-data.volume:/var/lib/postgresql/data:Z

[Service]
Restart=always
TimeoutStartSec=300

[Install]
WantedBy=default.target
