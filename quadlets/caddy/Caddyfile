{
	admin off
	email hovirix@tutanota.com
	acme_dns cloudflare {env.CLOUDFLARE_API_TOKEN}
}

(security_headers) {
	header {
		X-Content-Type-Options nosniff
		X-Frame-Options DENY
		Referrer-Policy strict-origin-when-cross-origin
		Permissions-Policy "geolocation=(), microphone=(), camera=()"
	}
}

idp.nemnix.site {
	encode zstd gzip
	import security_headers
	reverse_proxy authentik-server:9000
}

n8n.nemnix.site {
	encode zstd gzip
	import security_headers
	reverse_proxy n8n:5678
}

vault.nemnix.site {
	encode zstd gzip
	import security_headers
	reverse_proxy vaultwarden:80
}

immich.nemnix.site {
	encode zstd gzip
	import security_headers
	reverse_proxy immich-server:2283
}

grafana.nemnix.site {
	encode zstd gzip
	import security_headers
	reverse_proxy grafana:3000
}

paperless.nemnix.site {
	encode zstd gzip
	import security_headers

	handle_path /admin* {
	    respond 403 # Block Django admin
	}

	reverse_proxy paperless:8000
}

linkwarden.nemnix.site {
	encode zstd gzip
	import security_headers
	reverse_proxy linkwarden:3000
}


